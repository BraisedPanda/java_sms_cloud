package com.xqy.java_sms_cloud_ai.config;

import com.alibaba.cloud.ai.dashscope.api.DashScopeApi;
import org.springframework.ai.chat.client.ChatClient;
import org.springframework.ai.document.Document;
import org.springframework.ai.embedding.EmbeddingModel;
import org.springframework.ai.vectorstore.SimpleVectorStore;
import org.springframework.ai.vectorstore.VectorStore;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.List;

@Configuration
public class RagConfig {

    @Bean
    ChatClient chatClient(ChatClient.Builder builder) {
        return builder.defaultSystem("你是一名智能聊天助手，请根据用户问题进行回答").build();
    }

    @Bean
    VectorStore vectorStore(EmbeddingModel embeddingModel) {
        SimpleVectorStore simpleVectorStore = SimpleVectorStore.builder(embeddingModel)
                .build();

        List<Document> documents = List.of(
                new Document("好的，这是一份详细的空调遥控器说明文档模板。您可以根据您手中遥控器的具体型号和功能进行微调。\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "## **【产品型号：KQ-XX01】智能空调遥控器使用说明书**\n" +
                        "\n" +
                        "### **尊敬的客户：**\n" +
                        "\n" +
                        "感谢您选购本公司的空调产品。本说明书将详细介绍配套智能遥控器的功能及使用方法。请在使用前仔细阅读并妥善保管本说明书以备日后查阅。\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "### **一、 遥控器概述**\n" +
                        "\n" +
                        "1.  **外观示意图：**\n" +
                        "    *(此处应附上一张清晰的遥控器图片，并标注各个按键和区域)*\n" +
                        "    [图片：遥控器正面图]\n" +
                        "    1.  **液晶显示屏**\n" +
                        "    2.  **开关机键**\n" +
                        "    3.  **模式选择键**\n" +
                        "    4.  **温度调节键（▲/▼）**\n" +
                        "    5.  **风速选择键**\n" +
                        "    6.  **风向摆动键**\n" +
                        "    7.  **定时开/关键**\n" +
                        "    8.  **睡眠模式键**\n" +
                        "    9.  **强劲/节能键**\n" +
                        "    10. **灯光键**\n" +
                        "    11. **复位孔**\n" +
                        "\n" +
                        "2.  **基本规格：**\n" +
                        "    *   **电源：** 2 x 1.5V AAA（7号）电池\n" +
                        "    *   **有效距离：** 约8米（无障碍物环境下）\n" +
                        "    *   **信号类型：** 红外线（IR）\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "### **二、 安装与准备**\n" +
                        "\n" +
                        "1.  **安装电池：**\n" +
                        "    *   滑开遥控器背部的电池盖。\n" +
                        "    *   依据仓内标注的“+”和“-”极性，装入两节全新的AAA（7号）电池。\n" +
                        "    *   合上电池盖。\n" +
                        "\n" +
                        "2.  **注意事项：**\n" +
                        "    *   请勿混用新旧电池或不同型号的电池。\n" +
                        "    *   长期不使用时，请将电池取出，以免电池漏液损坏遥控器。\n" +
                        "    *   确保遥控器发射窗与空调接收窗之间无遮挡。\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "### **三、 按键功能详解**\n" +
                        "\n" +
                        "| 按键图标/名称 | 功能说明 |\n" +
                        "| :--- | :--- |\n" +
                        "| **【开/关】** | 控制空调的启动与关闭。 |\n" +
                        "| **【模式】** | 循环切换运行模式：<br> **自动 → 制冷 → 除湿 → 送风 → 制热** <br>（图标通常为：雪花=制冷，水滴=除湿，风扇=送风，太阳=制热） |\n" +
                        "| **【温度 ▲/▼】** | 增加或降低设定温度。调节范围通常为16℃-30℃。 |\n" +
                        "| **【风速】** | 循环切换风扇转速：<br> **自动 → 低风 → 中风 → 高风 → (强劲)** |\n" +
                        "| **【风向/摆动】** | **短按：** 调整上下扫风角度。<br> **长按（约2-3秒）：** 开启/关闭自动上下扫风功能。<br> （左右扫风功能通常需在机身手动调节） |\n" +
                        "| **【定时开/关】** | **定时关机：** 空调开机时设置，到达设定时间后空调自动关闭。<br> **定时开机：** 空调关机时设置，到达设定时间后空调自动开启。<br> 按一次进入定时设置，再按【▲/▼】调整时间（通常以0.5小时或1小时为单位），最后按【定时】键确认。 |\n" +
                        "| **【睡眠】** | 启用睡眠模式。空调会自动调节风速和温度（制冷时温度稍升高，制热时温度稍降低），以降低运行噪音并节省能耗。8小时后自动退出该模式。 |\n" +
                        "| **【强劲/快冷】** | 迅速达到设定温度。空调会以最高风速运行一段时间，然后自动恢复常规设置。 |\n" +
                        "| **【节能】** | 启用节能运行模式，优化运行效率以节省电能。 |\n" +
                        "| **【灯光/LED】** | 控制空调室内机显示屏的开启或关闭，夜间使用时可避免灯光干扰。 |\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "### **四、 显示屏信息解读**\n" +
                        "\n" +
                        "遥控器的液晶屏会显示当前的所有设置状态。\n" +
                        "*   **温度显示区：** 显示设定温度。\n" +
                        "*   **模式图标：** 显示当前选择的运行模式（自动、制冷等）。\n" +
                        "*   **风速图标：** 显示当前风速（自动、低、中、高）。\n" +
                        "*   **定时图标：** 显示已设置的定时状态。\n" +
                        "*   **摆动图标：** 显示自动扫风功能是否开启。\n" +
                        "*   **睡眠/节能图标：** 显示对应功能是否启用。\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "### **五、 常用功能操作示例**\n" +
                        "\n" +
                        "1.  **快速制冷：**\n" +
                        "    *   按下【开/关】键启动空调。\n" +
                        "    *   重复按【模式】键，选择“**制冷**”（雪花图标）。\n" +
                        "    *   按【温度▼】键，将温度设定至**25-26℃**。\n" +
                        "    *   按【风速】键，选择“**高风**”或按下【强劲】键。\n" +
                        "    *   按【风向】键，将风叶调整至水平方向吹拂。\n" +
                        "\n" +
                        "2.  **夜间睡眠：**\n" +
                        "    *   开启空调并选择所需模式（如制冷）。\n" +
                        "    *   设定一个舒适的温度（如26℃）。\n" +
                        "    *   按下【睡眠】键，睡眠图标亮起。\n" +
                        "    *   空调会自动调低风速并可能微调温度，您无需再操作。\n" +
                        "\n" +
                        "3.  **设定定时关机（入睡后3小时关闭）：**\n" +
                        "    *   在空调运行状态下，按下【定时】键。\n" +
                        "    *   按【▲】键，将时间增加至“**3.0h**”（显示在屏幕上）。\n" +
                        "    *   再次按下【定时】键确认。定时关机图标亮起。\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "### **六、 保养与故障排除**\n" +
                        "\n" +
                        "1.  **日常保养：**\n" +
                        "    *   用柔软的干布擦拭遥控器表面，切勿使用化学溶剂或湿布。\n" +
                        "    *   轻拿轻放，避免摔落和撞击。\n" +
                        "\n" +
                        "2.  **常见问题：**\n" +
                        "    *   **遥控器失灵：**\n" +
                        "        *   ✅ 检查电池电量是否充足，尝试更换新电池。\n" +
                        "        *   ✅ 检查空调电源是否接通。\n" +
                        "        *   ✅ 用手机相机对准遥控器发射窗，按任意键，看是否有紫光闪烁（检测红外信号是否发出）。\n" +
                        "    *   **无法控制空调：**\n" +
                        "        *   ✅ 确保遥控器对准空调室内机的信号接收器（通常是一个小暗窗），且中间无遮挡。\n" +
                        "        *   ✅ 检查是否距离过远，请靠近空调尝试。\n" +
                        "    *   **屏幕显示变淡或乱码：**\n" +
                        "        *   ✅ 通常是电池电量不足的征兆，请立即更换电池。\n" +
                        "    *   **复位操作：** 如果出现程序错乱，可用细针轻按【复位】孔内的按钮，遥控器将恢复出厂设置。\n" +
                        "\n" +
                        "---\n" +
                        "\n" +
                        "### **七、 安全注意事项**\n" +
                        "\n" +
                        "*   请将遥控器置于儿童无法触及的地方，防止误食电池。\n" +
                        "*   按照当地法规妥善处理废旧电池。\n" +
                        "*   若非专业人员，请勿自行拆卸遥控器。\n" +
                        "\n" +
                        "---\n" +
                        "**客服热线：** 400-111-222\n" +
                        "**公司网址：** www.111222.com\n" +
                        "\n" +
                        "**祝您使用愉快！**")
        );
        simpleVectorStore.add(documents);
        return simpleVectorStore;
    }


}
